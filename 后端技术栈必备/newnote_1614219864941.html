<attachment contenteditable="false" data-atts="%5B%5D" data-aid=".atts-681daf6e-8a87-4c92-8c31-146f53bc9d83"></attachment><pre class="ql-syntax" spellcheck="false">// version 1.0
class Singleton
{
private:
	static Singleton* instance;
private:
	Singleton() {};
	~Singleton() {};
	Singleton(const Singleton&amp;);
	Singleton&amp; operator=(const Singleton&amp;);
public:
	static Singleton* getInstance() 
        {
		if(instance == NULL) {
		Lock lock;  // 基于作用域的加锁，超出作用域，自动调用析构函数解锁
        if(instance == NULL) {
        	instance = new Singleton();
        }
	}

		return instance;
	}
};

// init static member
Singleton* Singleton::instance = NULL;
</pre><p><br></p><p>饿汉</p><pre class="ql-syntax" spellcheck="false">// version 1.3
class Singleton
{
private:
	static Singleton instance;
private:
	Singleton();
	~Singleton();
	Singleton(const Singleton&amp;);
	Singleton&amp; operator=(const Singleton&amp;);
public:
	static Singleton&amp; getInstance() {
		return instance;
	}
}

// initialize defaultly
Singleton Singleton::instance;
</pre><p><br></p><p><br></p>